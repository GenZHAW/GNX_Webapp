<script src="/js/clientJS/home.js"></script>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Welcome Page</title>
    <style>
        /* Add your custom CSS styles here */
        .container {
            display: flex;
            justify-content: center;
            margin: 0 2%; /* Adjust the margin values as needed */
        }

        .embedded-website {
            width: 95%;
            height: 900px;
        }

        .embedded-twitter {
            width: 30%;
        }

        .training-column {
            width: 20%;
            margin-left: 2%; /* Adjust the margin value as needed */
        }
    </style>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
</head>
<body>
<div class="text">Welcome <%= user.username%></div>

<div class="container">
    <div class="embedded-website">
        <h2>Website Feed</h2>
        <iframe src="https://teamgenetix.ch/newsroom" class="embedded-website"></iframe>
    </div>
    <div class="embedded-twitter">
        <h2>Twitter Feed</h2>
        <a class="twitter-timeline" data-width="400" data-height="900" href="https://twitter.com/TwitterDev">Tweets by TwitterDev</a>
    </div>
    <div class="training-column">
        <h2>Upcoming Trainings</h2>
        <table id="training-column" class="styled-table">
            <thead>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>

<script>
    const url = "/presence/nextTrainings/" + '<%= user.team.id %>';
    $.ajax({
        url: url,
        type: "GET",
        success: function (data) {
            const tableBody = $("#training-column");
            tableBody.empty();


            data.forEach(function(training) {
                const tr = $("<tr></tr>");
                const tdDate = $("<td></td>").text(training.readable_date);
                const tdFrom = $("<td></td>").text(training.starttime);
                const tdUntil = $("<td></td>").text(training.endtime);
                const tdType = $("<td></td>");

                const statusIndicator = $("<div></div>").addClass("status-indicator");
                if (training.trainingtype === "sure") {
                    statusIndicator.addClass("status-green");
                } else {
                    statusIndicator.addClass("status-orange");
                }
                tdType.append(statusIndicator)

                tr.append(tdDate).append(tdFrom).append(tdUntil).append(tdType);
                tableBody.append(tr);
            });
        },
        error: function (data) {
            console.log(data);
        }
    });
</script>
